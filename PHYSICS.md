# PHYSICS.md
Версія: 0.1
Стан: active

## 1. Призначення
Цей файл описує базові закони системи Simulation v2:
- як працює час;
- що таке "SIM";
- які є сутності, події, ресурси;
- як усе це еволюціонує крок за кроком.

PHYSICS застосовується до всіх SIM-* у цьому репозиторії, якщо SIM не вказує власні перевизначення.

## 2. Час і тік
- Система дискретна.
- Мінімальна одиниця часу: **tick**.
- Кожен SIM описує, що для нього означає один tick (наприклад, 1 день, 1 крок агента, 1 ітерація алгоритму).
- На кожному tick:
  1. Читається поточний стан.
  2. Застосовуються правила оновлення.
  3. Генерується новий стан.

## 3. Сутності (Entities)
Базові типи сутностей, доступні для SIM-ів:
- **Agent** — активний учасник, має стани, може приймати рішення.
- **Environment** — фонова структура, в якій існують агенти.
- **Resource** — те, що агенти можуть споживати/виробляти/обмінювати.
- **Rule** — формальне правило, яке визначає зміну стану.

Кожен SIM визначає:
- які типи сутностей він реально використовує;
- які властивості має кожна сутність.

## 4. Структура стану
Стан SIM на tick `t` повинен бути представлений як серіалізований об’єкт (наприклад, JSON / YAML / таблиці), який:
- відтворюваний (за однакових вхідних умов дає однаковий результат);
- мінімально достатній (нічого зайвого).

Рекомендовано:
- `world_state` — опис середовища;
- `agents_state` — масив/таблиця агентів;
- `meta` — службова інфа (версія фізики, версія SIM, timestamp).

## 5. Закони оновлення
Базовий цикл:
1. Зібрати всі події/входи на tick `t`.
2. Обчислити нові стани сутностей згідно з правилами.
3. Записати результати як стан на tick `t+1`.

Правила можуть бути:
- **детерміновані** (без випадковості);
- **стохастичні** (із випадковістю, але з фіксованим seed).

### 5.1. Детермінізм та фіксація випадковості
- Всі джерела випадковості повинні залежати від контрольованого `seed`.
- SIM повинен вміти відтворити історію, маючи:
  - початковий стан;
  - seed;
  - послідовність зовнішніх входів (якщо є).

## 6. Зовнішні входи й інтерфейси
PHYSICS дозволяє SIM-ам:
- отримувати зовнішні сигнали (input сценарію, користувача, іншої системи);
- генерувати виходи (output, логи, метрики).

Кожен SIM описує:
- формат входів;
- формат виходів;
- які частини фізики при цьому задіюються.

## 7. Сумісність і версіонування
- Кожна зміна PHYSICS збільшує версію: 0.1 → 0.2 → 0.3 → ...
- Кожен SIM у REGISTRY вказує, на якій версії PHYSICS він працює.
- Заборонено тихо змінювати сенс версії (breaking changes тільки з новим номером).

## 8. TODO для наступних версій PHYSICS
- 0.2: додати формальний формат стану (мін. контракт).
- 0.3: ввести стандартні типи ресурсів і операцій.
- 0.4: описати протоколи взаємодії між кількома SIM-ами.
